{% extends 'base.html' %}
{% load widget_tweaks %}
{% block body %}
    <!-- COMMON INFO -->
    <form action="{% url "venues.views.update_restaurant" restaurant.pk %}" method="POST">
        {% csrf_token %}
        <div class="row">
            <div class="col-md-8">
                {% if restaurant.is_closed %}
                    <div class="alert alert-danger" role="alert">CLOSED</div>
                {% endif %}
                <div class="input-group input-group-lg {% if form.name.errors %} has-error{% endif %}">
                    <div class="input-group-addon">
                        Name
                    </div>
                    {{ form.name|add_class:'form-control' }}
                    <div class="input-group-btn">
                        <button class="btn btn-success" type="submit">
                            <span class="glyphicon glyphicon-save"></span>
                        </button>
                    </div>
                </div>

                <h4>
                    <div class="input-group{% if form.cuisine.errors %} has-error{% endif %}">
                        <div class="input-group-addon">
                            cuisine
                        </div>
                        {{ form.cuisine|add_class:'form-control' }}
                    </div>
                </h4>

                <h4>
                    <div class="input-group {% if form.eatingOptions.errors %} has-error{% endif %}">
                        <div class="input-group-addon">
                            eating options
                        </div>
                        {{ form.eatingOptions|add_class:'form-control' }}
                    </div>
                </h4>

                <h4>
                    <div class="input-group {% if form.address.errors %} has-error{% endif %}">
                        <div class="input-group-addon">
                            address
                        </div>
                        {{ form.address|add_class:'form-control' }}
                    </div>
                </h4>

                <div class="row">
                    <div class="col-md-8">
                        {{ form.phone.errors }}

                        <div class="input-group{% if form.phone.errors %} has-error{% endif %}">
                            <div class="input-group-addon">
                                <span class="glyphicon glyphicon-earphone"></span>
                            </div>
                            {{ form.phone|add_class:'form-control' }}
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="input-group {% if form.closed_reports_count.errors %} has-error{% endif %}">
                            <div class="input-group-addon">served</div>
                            {{ form.closed_reports_count|add_class:'form-control' }}
                        </div>
                    </div>
                </div>

                <div class="panel panel-default" style="margin-top: 0.75em">
                    <div class="panel-heading">
                        <h3 class="panel-title">Categories</h3>
                    </div>
                    <div class="panel-body">
                        {% if form.categories.errors %}
                            <div class="alert alert-danger">{{ form.categories.errors }}</div>
                        {% endif %}

                        <div class="r-categories">
                            {{ form.categories }}
                        </div>
                    </div>
                </div>


                {#                <select multiple name="categories">#}
                {#                    {% for category in categories %}#}
                {#                        <option value="{{ category.pk }}">{{ category.name }}</option>#}
                {#                    {% endfor %}#}
                {#                </select>#}
            </div>
            <!-- GOOGLE MAP -->
            <div class="col-md-4">
                <div id="r-map" style="width: 100%; height: 300px"></div>

            </div>
            <!-- END GOOGLE MAP -->
        </div>
    </form>
    <!-- ENDCOMMON INFO -->

    <hr/>

    <div class="row">
        <div class="col-md-8">
            {% if user.is_authenticated %}
                {% include 'comments/comment-form.html' %}
                <hr/>
            {% endif %}
            {% for comment in comments %}
                {% include "comments/comment.html" %}
            {% endfor %}
        </div>
        <div class="col-md-4">
            <div class="panel panel-default">
                <div class="panel-body">
                    <form autocomplete="off" action="{% url "venues.views.add_note" restaurant.id %}" method="post">
                        {% if user.is_authenticated %}
                            {% include 'notes/note-form.html' %}
                        {% endif %}
                    </form>
                </div>
            </div>
            {% for note in notes %}
                {% include "notes/note.html" %}
            {% endfor %}
        </div>
    </div>

    {% include "restaurants/google-map.html" %}

    {#    {{ restaurant.yelp_id }}#}
    {#    {{ restaurant.yelp_url }}#}
    {#    {{ restaurant.foursquare_id }}#}
    {#    {{ restaurant.foursquare_url }}#}

{% endblock %}