{% extends 'base.html' %}
{% load widget_tweaks sekizai_tags static %}
{% block body %}
    <!-- COMMON INFO -->
    <form action="{% url "venues.views.venuess.update_restaurant" restaurant.pk %}" method="POST">
        {% csrf_token %}
        <div class="row">
            <div class="col-md-8">
                <form action="{% url "venues.views.venuess.add_restaurant" %}" method="POST">
                    {% include "restaurants/item_form.html" %}
                </form>
            </div>
            <!-- GOOGLE MAP -->
            <div class="col-md-4">
                <input id="pac-input" class="form-control" type="text" placeholder="specify location">

                <div id="map-canvas" style="width:100%;height:350px;margin: 18px 0;"></div>
            </div>
            <!-- END GOOGLE MAP -->
        </div>
    </form>
    <!-- ENDCOMMON INFO -->

    <hr/>

    <div class="row">
        <div class="col-md-8">
            {% if user.is_authenticated %}
                {% include 'comments/comment-form.html' %}
                <hr/>
            {% endif %}
            {% for comment in comments %}
                {% include "comments/comment.html" %}
            {% endfor %}
        </div>
        <div class="col-md-4">
            <div class="panel panel-default">
                <div class="panel-body">
                    <form autocomplete="off" action="{% url "venues.views.notes.add_note" restaurant.id %}"
                          method="post">
                        {% if user.is_authenticated %}
                            {% include 'notes/note-form.html' %}
                        {% endif %}
                    </form>
                </div>
            </div>
            {% for note in notes %}
                {% include "notes/note.html" %}
            {% endfor %}
        </div>
    </div>

    {% addtoblock "js" %}
        {#        {% include "restaurants/google-map.html" %}#}
        <script src="https://maps.googleapis.com/maps/api/js"></script>
        <script>
            function initialize() {
                var mapCanvas = document.getElementById('map-canvas');
                latlng = new google.maps.LatLng({{restaurant.location.y}}, {{restaurant.location.x}});
                var mapOptions = {
                    center: latlng,
                    zoom: 18,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    mapTypeControl: false
                };
                var map = new google.maps.Map(mapCanvas, mapOptions);
                var marker = new google.maps.Marker({
                    position: latlng,
                    map: map,
                    title: '{{ restaurant.name }} | {{ restaurant.address }}'
                });
            }
            google.maps.event.addDomListener(window, 'load', initialize);
        </script>
    {% endaddtoblock %}

    {#    {{ restaurant.yelp_id }}#}
    {#    {{ restaurant.yelp_url }}#}
    {#    {{ restaurant.foursquare_id }}#}
    {#    {{ restaurant.foursquare_url }}#}

{% endblock %}